"use strict";(globalThis["webpackChunkencounter_builder"]=globalThis["webpackChunkencounter_builder"]||[]).push([[263],{4263:(e,t,l)=>{l.r(t),l.d(t,{default:()=>Ze});var r=l(9835);const a=(0,r._)("img",{src:"https://cdn.quasar.dev/logo-v2/svg/logo-mono-white.svg"},null,-1),n={clas:"row"},o={class:"row"},s={class:"col-12 col-md-8 fixed-sm-bottom creatures-pane"},i={class:"row"},u={class:"col-12 col-md-4 encounter-pane"};function c(e,t,l,c,d,m){const p=(0,r.up)("q-avatar"),f=(0,r.up)("q-toolbar-title"),h=(0,r.up)("q-space"),g=(0,r.up)("q-btn"),y=(0,r.up)("q-toolbar"),v=(0,r.up)("q-header"),b=(0,r.up)("DifficultyBar"),w=(0,r.up)("FilterBar"),_=(0,r.up)("CreatureTable"),k=(0,r.up)("EncounterPanel"),x=(0,r.up)("q-page-container"),W=(0,r.up)("q-layout");return(0,r.wg)(),(0,r.j4)(W,{view:"hHh lpR fFf"},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{elevated:"",class:"bg-dark text-white","height-hint":"98"},{default:(0,r.w5)((()=>[(0,r.Wm)(y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,null,{default:(0,r.w5)((()=>[a])),_:1}),(0,r.Uk)(" Kobold Encounter Builder ")])),_:1}),(0,r.Wm)(h),(0,r.Wm)(g,{onClick:t[0]||(t[0]=e=>m.toggleDarkTheme(this)),round:"",icon:e.darkMode,ripple:!1},null,8,["icon"])])),_:1})])),_:1}),(0,r.Wm)(x,null,{default:(0,r.w5)((()=>[(0,r._)("div",n,[(0,r.Wm)(b,{partySize:e.partySize,partyLevel:e.partyLevel,encounter:e.encounter},null,8,["partySize","partyLevel","encounter"])]),(0,r._)("div",o,[(0,r._)("div",s,[(0,r._)("div",i,[(0,r.Wm)(w,{onUpdateFilter:m.updateFilter},null,8,["onUpdateFilter"])]),(0,r.Wm)(_,{filter:e.creatureFilter},null,8,["filter"])]),(0,r._)("div",u,[(0,r.Wm)(k)])])])),_:1})])),_:1})}const d=["href"];function m(e,t,l,a,n,o){const s=(0,r.up)("q-btn"),i=(0,r.up)("q-table");return(0,r.wg)(),(0,r.iD)("div",null,[0!=e.creatureData.length?((0,r.wg)(),(0,r.j4)(i,{key:0,rows:e.creatureData,filter:l.filter,"filter-method":o.filterData,"virtual-scroll":"",columns:e.columns,"row-key":"name",pagination:{page:1,rowsPerPage:0},dense:"",class:"creature-table",onRowClick:t[1]||(t[1]=(e,t,l)=>a.encounter.addCreature(t)),selection:"single","hide-bottom":"",style:{bottom:"0"}},{"body-selection":(0,r.w5)((e=>[(0,r._)("a",{class:"table-btn",href:`https://2e.aonprd.com/Monsters.aspx?ID=${e.row.id}`,target:"_blank",onClick:t[0]||(t[0]=e=>e.stopPropagation())},[(0,r.Wm)(s,{round:"",dense:"",icon:"search"})],8,d)])),_:1},8,["rows","filter","filter-method","columns"])):(0,r.kq)("",!0)])}l(9665);var p=l(1809);const f=(0,p.Q_)("party",{state:()=>({_size:4,_level:1}),getters:{size(){return this._size},level(){return this._level}},actions:{setSize(e){console.log(),this._size=e},setLevel(e){this._level=e}}});var h=l(320);function g(e,t,l,r){t=t||1,l=l||0;let a=[10,15,20,30,40,60,80,120,160],n=e.level+l-r;return n=n<-4?-4:n>4?4:n,a[n+4]*t}const y=(0,p.Q_)("encounter",{state:()=>({_party:f(),_creatures:[]}),getters:{creatures(e){return e._creatures.map((e=>(e.xp=g(e.data,e.qty,e.strength,this._party.level),e)))}},actions:{addCreature(e){this._creatures.push({id:(0,h.Z)(),qty:1,data:e,strength:0})},removeCreature(e){let t=this._creatures.findIndex((t=>t.id==e.id));this._creatures.splice(t,1)},changeQty(e,t){t.qty=e},changeStrength(e,t){t.strength=["weak","base","elite"].indexOf(e)-1}}}),v={setup(){const e=y();return{encounter:e}},mounted(){this.fetchData()},methods:{fetchData(){const e=this;fetch("creatures.json").then((e=>e.json())).then((t=>e.creatureData=t.creatures))},filterData(e,t){let l=e.filter((e=>e.level>=t.levelRange.min&&e.level<=t.levelRange.max));return l.filter((e=>Object.values(e).toString().toLowerCase().includes(t.filter.toLowerCase())))}},props:["filter"],data:()=>({creatureData:[],columns:[{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"level",required:!0,label:"Level",align:"right",field:"level",sortable:!0},{name:"size",required:!0,label:"Size",align:"right",field:"size",sortable:!0},{name:"family",required:!0,label:"Family",align:"left",field:"family",sortable:!0},,]})};var b=l(1639),w=l(9921),_=l(8879),k=l(9984),x=l.n(k);const W=(0,b.Z)(v,[["render",m]]),q=W;x()(v,"components",{QTable:w.Z,QBtn:_.Z});var C=l(6970);const z={class:"column difficulty-container"},Z={class:"absolute-full flex flex-center"},Q={class:"flex difficulty-bar-label",style:{position:"absolute",left:"25%",width:"0px"}},S={class:"flex difficulty-bar-label",style:{position:"absolute",left:"37.5%",width:"0px"}},L={class:"flex difficulty-bar-label",style:{position:"absolute",left:"50%",width:"0px"}},B={class:"flex difficulty-bar-label",style:{position:"absolute",left:"75%",width:"0px"}},D={class:"flex difficulty-bar-label",style:{position:"absolute",left:"100%",width:"0px"}},I={class:"flex difficulty-bar-label-main",style:{position:"absolute",left:"50%",width:"0px"}};function U(e,t,l,a,n,o){const s=(0,r.up)("q-badge"),i=(0,r.up)("q-linear-progress");return(0,r.wg)(),(0,r.iD)("div",z,[(0,r.Wm)(i,{"animation-speed":250,stripe:"",rounded:"",size:"20px",value:o.difficulty,color:o.barColor,class:"q-mt-sm difficulty-bar"},{default:(0,r.w5)((()=>[(0,r._)("div",Z,[(0,r._)("div",Q,[(0,r.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-50%)"},color:"blue"},{default:(0,r.w5)((()=>[(0,r.Uk)("trivial "+(0,C.zw)(40*a.party.size*.25),1)])),_:1})]),(0,r._)("div",S,[(0,r.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-50%)"},color:"green"},{default:(0,r.w5)((()=>[(0,r.Uk)("low "+(0,C.zw)(40*a.party.size*.375),1)])),_:1})]),(0,r._)("div",L,[(0,r.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-50%)"},color:"yellow"},{default:(0,r.w5)((()=>[(0,r.Uk)("moderate "+(0,C.zw)(40*a.party.size*.5),1)])),_:1})]),(0,r._)("div",B,[(0,r.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-50%)"},color:"orange"},{default:(0,r.w5)((()=>[(0,r.Uk)("severe "+(0,C.zw)(40*a.party.size*.75),1)])),_:1})]),(0,r._)("div",D,[(0,r.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-100%)"},color:"red"},{default:(0,r.w5)((()=>[(0,r.Uk)("extreme "+(0,C.zw)(40*a.party.size),1)])),_:1})]),(0,r._)("div",I,[(0,r.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-50%)"},color:o.barColorMobile},{default:(0,r.w5)((()=>[(0,r.Uk)((0,C.zw)(o.severity)+" "+(0,C.zw)(40*a.party.size*o.difficulty),1)])),_:1},8,["color"])])])])),_:1},8,["value","color"])])}const F={setup(){const e=f(),t=y();return{party:e,encounter:t}},mounted(){},computed:{difficulty(){let e=this.encounter.creatures.reduce(((e,t)=>e+t.xp),0);return e/(40*this.party.size)},barColor(){const e=this.difficulty;return window.innerWidth>992?e>.75?"red":e>.5?"orange":e>.375?"yellow":"green":this.barColorMobile},barColorMobile(){const e=this.difficulty;return e>=.75?"red":e>=.5?"orange":e>=.375?"yellow":"green"},severity(){const e=this.difficulty;return e>=1?"Extreme":e>=.75?"Severe":e>=.5?"Moderate":e>=.375?"Low":"Trivial"}},methods:{},data:()=>({}),props:[]};var R=l(8289),T=l(990);const E=(0,b.Z)(F,[["render",U]]),$=E;x()(F,"components",{QLinearProgress:R.Z,QBadge:T.Z});const P=(0,r._)("span",{class:"level-range-label"},"Level range:",-1),V=(0,r._)("div",{style:{"text-align":"center"}},"Party Level",-1),j=(0,r._)("div",{style:{"text-align":"center"}},"Party Size",-1);function M(e,t,l,a,n,o){const s=(0,r.up)("q-btn"),i=(0,r.up)("q-input"),u=(0,r.up)("q-range"),c=(0,r.up)("button-counter"),d=(0,r.up)("q-item-section"),m=(0,r.up)("q-item"),p=(0,r.up)("q-list"),f=(0,r.up)("q-menu"),h=(0,r.up)("q-toolbar");return(0,r.wg)(),(0,r.j4)(h,{class:(0,C.C_)(["d-flex justify-content-between",e.$q.dark.isActive?"bg-grey-9 text-white":"bg-grey-3"])},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{flat:"",round:"",dense:"",icon:"search"}),(0,r.Wm)(i,{style:{width:"30%","padding-right":"20px"},dense:"",modelValue:e.filter,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.filter=t),t[1]||(t[1]=t=>e.$emit("updateFilter",{filter:t}))],label:"filter"},null,8,["modelValue"]),P,(0,r.Wm)(u,{modelValue:e.levelRange,"onUpdate:modelValue":t[2]||(t[2]=t=>e.levelRange=t),style:{width:"30%","margin-left":"25px","margin-right":"35px","flex-grow":"1"},min:-1,max:25,markers:o.markers,label:"","marker-labels":"",onChange:t[3]||(t[3]=t=>e.$emit("updateFilter",{levelRange:e.levelRange}))},null,8,["modelValue","markers"]),(0,r.Wm)(s,{icon:"group",style:{"margin-right":"8px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{style:{"min-width":"100px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[V,(0,r.Wm)(c,{min:1,value:a.party.level,label:"Party Level",type:"number",onChange:t[4]||(t[4]=e=>o.setLevel(e))},null,8,["value"])])),_:1})])),_:1}),(0,r.Wm)(m,null,{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[j,(0,r.Wm)(c,{min:1,value:a.party.size,label:"Party Size",type:"number",onChange:t[5]||(t[5]=e=>o.setSize(e))},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.Wm)(s,{icon:"layers"},{default:(0,r.w5)((()=>[(0,r.Wm)(f,null,{default:(0,r.w5)((()=>[(0,r.Wm)(p,{bordered:"",separator:""},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(l.sources,(t=>((0,r.wg)(),(0,r.j4)(m,{clickable:"",active:e.active,key:t},{default:(0,r.w5)((()=>[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Uk)((0,C.zw)(t),1)])),_:2},1024)])),_:2},1032,["active"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])}const X={style:{width:"8em","max-width":"100%"}};function A(e,t,l,a,n,o){const s=(0,r.up)("q-btn"),i=(0,r.up)("q-input"),u=(0,r.up)("q-btn-group");return(0,r.wg)(),(0,r.iD)("div",X,[(0,r.Wm)(u,{shrink:"",class:(0,C.C_)(["button-counter","text-white","rounded-borders",l.color])},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{ripple:!1,round:"",dense:"",flat:"",icon:"remove",class:"q-mr-xs",onClick:o.minusBtnClick},null,8,["onClick"]),(0,r.Wm)(i,{readonly:"",dense:"",dark:"",borderless:"",modelValue:n.counter,"onUpdate:modelValue":t[0]||(t[0]=e=>n.counter=e),"input-class":"text-center"},null,8,["modelValue"]),(0,r.Wm)(s,{ripple:!1,round:"",dense:"",flat:"",icon:"add",class:"q-mr-xs",onClick:o.plusBtnClick},null,8,["onClick"])])),_:1},8,["class"])])}const H={mounted(){console.log(this.min,this.max),this.counter=this.value||0},methods:{plusBtnClick(){void 0!==this.max&&this.counter==this.max||(this.counter++,this.$emit("change",this.counter,this.$el))},minusBtnClick(){void 0!=this.min&&this.counter==this.min||(this.counter--,this.$emit("change",this.counter,this.$el))}},data(){return{counter:this.value}},props:["value","color","min","max"]};var K=l(7236),O=l(6611);const Y=(0,b.Z)(H,[["render",A]]),G=Y;x()(H,"components",{QBtnGroup:K.Z,QBtn:_.Z,QInput:O.Z});const N={setup(){const e=f();return{party:e}},mounted(){this.$emit("updateFilter",{levelRange:this.levelRange})},computed:{markers(){return window.innerWidth>992?2:26}},methods:{setLevel(e){localStorage.setItem("partyLevel",e),this.party.setLevel(e)},setSize(e){localStorage.setItem("partySize",e),this.party.setSize(e)}},data:()=>({filter:"",levelRange:{min:-1,max:25}}),components:{ButtonCounter:G},props:["sources"]};var J=l(1663),ee=l(9380),te=l(5290),le=l(3246),re=l(490),ae=l(1233);const ne=(0,b.Z)(N,[["render",M]]),oe=ne;x()(N,"components",{QToolbar:J.Z,QBtn:_.Z,QInput:O.Z,QRange:ee.Z,QMenu:te.Z,QList:le.Z,QItem:re.Z,QItemSection:ae.Z});const se={key:0},ie={class:"encounter-container"};function ue(e,t,l,a,n,o){const s=(0,r.up)("q-banner"),i=(0,r.up)("EncounterListItem");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(s,{"inline-actions":"",class:"bg-dark text-white"},{action:(0,r.w5)((()=>[])),default:(0,r.w5)((()=>[(0,r.Uk)(" Encounter Cost: "+(0,C.zw)(o.encounterCost)+" ",1),4!=a.party.size?((0,r.wg)(),(0,r.iD)("div",se,[(0,r._)("small",null,"Awarded XP: "+(0,C.zw)(Math.floor(4*o.encounterCost/a.party.size)),1)])):(0,r.kq)("",!0)])),_:1}),(0,r._)("div",ie,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.encounter.creatures,(l=>((0,r.wg)(),(0,r.j4)(i,{key:l.id,creature:l,onRemoveCreature:t[0]||(t[0]=t=>e.$emit("removeEncounterListItem",t)),onChangeStrength:t[1]||(t[1]=(t,l)=>e.$emit("changeStrength",t,l)),onChangeQty:t[2]||(t[2]=(t,l)=>e.$emit("changeQty",t,l))},null,8,["creature"])))),128))])])}function ce(e,t,l,a,n,o){const s=(0,r.up)("ButtonCounter"),i=(0,r.up)("q-item-section"),u=(0,r.up)("q-badge"),c=(0,r.up)("q-btn-toggle"),d=(0,r.up)("q-item");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(d,null,{default:(0,r.w5)((()=>[(0,r.Wm)(i,{avatar:""},{default:(0,r.w5)((()=>[(0,r.Wm)(s,{value:1,onChange:o.qtyChanged},null,8,["onChange"])])),_:1}),(0,r.Wm)(i,null,{default:(0,r.w5)((()=>[(0,r._)("div",null,[(0,r.Uk)((0,C.zw)(l.creature.data.name)+" ",1),(0,r.Wm)(u,{style:{float:"right"},outline:"",color:"primary",label:`${l.creature.xp}xp`},null,8,["label"])])])),_:1}),(0,r.Wm)(i,{side:""},{default:(0,r.w5)((()=>[(0,r.Wm)(c,{modelValue:o.strength,"onUpdate:modelValue":t[0]||(t[0]=e=>o.strength=e),flat:"","toggle-color":"primary",ripple:!1,options:[{label:"WEAK",value:"weak"},{label:"BASE",value:"base"},{label:"ELITE",value:"elite"}]},null,8,["modelValue"])])),_:1})])),_:1})])}const de={setup(){const e=y();return{encounter:e}},mounted(){this.qty=this.creature.qty},methods:{qtyChanged(e){e<=0?this.encounter.removeCreature(this.creature):this.encounter.changeQty(e,this.creature)}},props:["creature"],computed:{strength:{get(){return["weak","base","elite"][this.creature.strength+1]},set(e){this.encounter.changeStrength(e,this.creature)}}},watch:{"creature.qty"(e){this.qty=e}},data:()=>({qty:null}),components:{ButtonCounter:G}};var me=l(1389);const pe=(0,b.Z)(de,[["render",ce]]),fe=pe;x()(de,"components",{QItem:re.Z,QItemSection:ae.Z,QBadge:T.Z,QBtnToggle:me.Z});const he={setup(){const e=f(),t=y();return{party:e,encounter:t}},mounted(){},methods:{},computed:{encounterCost(){return this.encounter.creatures.reduce(((e,t)=>e+t.xp),0)}},data:()=>({components:{EncounterListItem:fe}}),props:[],components:{EncounterListItem:fe}};var ge=l(7128);const ye=(0,b.Z)(he,[["render",ue]]),ve=ye;x()(he,"components",{QBanner:ge.Z});var be=l(9114);const we={setup(){const e=f(),t=localStorage.getItem("dark_theme")||!1;return be.Z.set("true"==t),{party:e}},mounted(){this.party.setSize(parseInt(localStorage.getItem("partySize")||4)),this.party.setLevel(parseInt(localStorage.getItem("partyLevel")||1))},components:{CreatureTable:q,DifficultyBar:$,FilterBar:oe,EncounterPanel:ve},computed:{},methods:{toggleDarkTheme(e){be.Z.toggle(),localStorage.setItem("dark_theme",be.Z.isActive)},updateFilter(e){Object.assign(this.creatureFilter,e)}},data:()=>({darkMode:"dark_mode",encounter:[],partyLevel:null,partySize:null,creatureFilter:{filter:"",levelRange:{min:-1,max:25}}})};var _e=l(7605),ke=l(6602),xe=l(1973),We=l(1357),qe=l(136),Ce=l(2133);const ze=(0,b.Z)(we,[["render",c]]),Ze=ze;x()(we,"components",{QLayout:_e.Z,QHeader:ke.Z,QToolbar:J.Z,QToolbarTitle:xe.Z,QAvatar:We.Z,QSpace:qe.Z,QBtn:_.Z,QPageContainer:Ce.Z})}}]);