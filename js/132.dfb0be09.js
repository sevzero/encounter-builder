"use strict";(globalThis["webpackChunkencounter_builder"]=globalThis["webpackChunkencounter_builder"]||[]).push([[132],{1132:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ze});var a=l(9835);const r=(0,a._)("img",{src:"https://cdn.quasar.dev/logo-v2/svg/logo-mono-white.svg"},null,-1),n={clas:"row"},o={class:"row"},s={class:"col"},i={class:"row"},u={class:"col-md-4"};function c(e,t,l,c,d,m){const p=(0,a.up)("q-avatar"),h=(0,a.up)("q-toolbar-title"),g=(0,a.up)("q-space"),f=(0,a.up)("q-btn"),v=(0,a.up)("q-toolbar"),y=(0,a.up)("q-header"),w=(0,a.up)("DifficultyBar"),b=(0,a.up)("FilterBar"),_=(0,a.up)("CreatureTable"),q=(0,a.up)("EncounterPanel"),k=(0,a.up)("q-page-container"),W=(0,a.up)("q-layout");return(0,a.wg)(),(0,a.j4)(W,{view:"hHh lpR fFf"},{default:(0,a.w5)((()=>[(0,a.Wm)(y,{elevated:"",class:"bg-dark text-white","height-hint":"98"},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[r])),_:1}),(0,a.Uk)(" Kobold Encounter Builder ")])),_:1}),(0,a.Wm)(g),(0,a.Wm)(f,{onClick:t[0]||(t[0]=e=>m.toggleDarkTheme(this)),round:"",icon:e.darkMode,ripple:!1},null,8,["icon"])])),_:1})])),_:1}),(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a._)("div",n,[(0,a.Wm)(w,{partySize:e.partySize,partyLevel:e.partyLevel,encounter:e.encounter},null,8,["partySize","partyLevel","encounter"])]),(0,a._)("div",o,[(0,a._)("div",s,[(0,a._)("div",i,[(0,a.Wm)(b,{onUpdateFilter:m.updateFilter},null,8,["onUpdateFilter"])]),(0,a.Wm)(_,{filter:e.creatureFilter},null,8,["filter"])]),(0,a._)("div",u,[(0,a.Wm)(q)])])])),_:1})])),_:1})}const d=["href"];function m(e,t,l,r,n,o){const s=(0,a.up)("q-btn"),i=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",null,[0!=e.creatureData.length?((0,a.wg)(),(0,a.j4)(i,{key:0,rows:e.creatureData,filter:l.filter,"filter-method":o.filterData,"virtual-scroll":"",columns:e.columns,"row-key":"name",pagination:{page:1,rowsPerPage:0},dense:"",class:"creature-table",onRowClick:t[1]||(t[1]=(e,t,l)=>r.encounter.addCreature(t)),selection:"single","hide-bottom":"",style:{bottom:"0"}},{"body-selection":(0,a.w5)((e=>[(0,a._)("a",{class:"table-btn",href:`https://2e.aonprd.com/Monsters.aspx?ID=${e.row.id}`,target:"_blank",onClick:t[0]||(t[0]=e=>e.stopPropagation())},[(0,a.Wm)(s,{round:"",dense:"",icon:"search"})],8,d)])),_:1},8,["rows","filter","filter-method","columns"])):(0,a.kq)("",!0)])}l(9665);var p=l(1809);const h=(0,p.Q_)("party",{state:()=>({_size:4,_level:1}),getters:{size(){return this._size},level(){return this._level}},actions:{setSize(e){console.log(),this._size=e},setLevel(e){this._level=e}}});var g=l(320);function f(e,t,l,a){t=t||1,l=l||0;let r=[10,15,20,30,40,60,80,120,160],n=e.level+l-a;return n=n<-4?-4:n>4?4:n,r[n+4]*t}const v=(0,p.Q_)("encounter",{state:()=>({_party:h(),_creatures:[]}),getters:{creatures(e){return e._creatures.map((e=>(e.xp=f(e.data,e.qty,e.strength,this._party.level),e)))}},actions:{addCreature(e){this._creatures.push({id:(0,g.Z)(),qty:1,data:e,strength:0})},removeCreature(e){let t=this._creatures.findIndex((t=>t.id==e.id));this._creatures.splice(t,1)},changeQty(e,t){t.qty=e},changeStrength(e,t){t.strength=["weak","base","elite"].indexOf(e)-1}}}),y={setup(){const e=v();return{encounter:e}},mounted(){this.fetchData()},methods:{fetchData(){const e=this;fetch("creatures.json").then((e=>e.json())).then((t=>e.creatureData=t.creatures))},filterData(e,t){let l=e.filter((e=>e.level>=t.levelRange.min&&e.level<=t.levelRange.max));return l.filter((e=>Object.values(e).toString().toLowerCase().includes(t.filter.toLowerCase())))}},props:["filter"],data:()=>({creatureData:[],columns:[{name:"name",required:!0,label:"Name",align:"left",field:"name",sortable:!0},{name:"level",required:!0,label:"Level",align:"right",field:"level",sortable:!0},{name:"size",required:!0,label:"Size",align:"right",field:"size",sortable:!0},{name:"family",required:!0,label:"Family",align:"left",field:"family",sortable:!0},,]})};var w=l(1639),b=l(1753),_=l(8879),q=l(9984),k=l.n(q);const W=(0,w.Z)(y,[["render",m]]),x=W;k()(y,"components",{QTable:b.Z,QBtn:_.Z});var C=l(6970);const Z={class:"column difficulty-container"},z={class:"absolute-full flex flex-center"},Q={class:"flex",style:{position:"absolute",left:"25%",width:"0px"}},S={class:"flex",style:{position:"absolute",left:"37.5%",width:"0px"}},L={class:"flex",style:{position:"absolute",left:"50%",width:"0px"}},B={class:"flex",style:{position:"absolute",left:"75%",width:"0px"}},D={class:"flex",style:{position:"absolute",left:"100%",width:"0px"}};function I(e,t,l,r,n,o){const s=(0,a.up)("q-badge"),i=(0,a.up)("q-linear-progress");return(0,a.wg)(),(0,a.iD)("div",Z,[(0,a.Wm)(i,{"animation-speed":250,stripe:"",rounded:"",size:"20px",value:o.difficulty,color:o.barColor,class:"q-mt-sm difficulty-bar"},{default:(0,a.w5)((()=>[(0,a._)("div",z,[(0,a._)("div",Q,[(0,a.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-50%)"},color:"blue"},{default:(0,a.w5)((()=>[(0,a.Uk)("trivial "+(0,C.zw)(40*r.party.size*.25),1)])),_:1})]),(0,a._)("div",S,[(0,a.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-50%)"},color:"green"},{default:(0,a.w5)((()=>[(0,a.Uk)("low "+(0,C.zw)(40*r.party.size*.375),1)])),_:1})]),(0,a._)("div",L,[(0,a.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-50%)"},color:"yellow"},{default:(0,a.w5)((()=>[(0,a.Uk)("moderate "+(0,C.zw)(40*r.party.size*.5),1)])),_:1})]),(0,a._)("div",B,[(0,a.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-50%)"},color:"orange"},{default:(0,a.w5)((()=>[(0,a.Uk)("severe "+(0,C.zw)(40*r.party.size*.75),1)])),_:1})]),(0,a._)("div",D,[(0,a.Wm)(s,{class:"difficulty-bar-label",style:{transform:"translateX(-100%)"},color:"red"},{default:(0,a.w5)((()=>[(0,a.Uk)("extreme "+(0,C.zw)(40*r.party.size),1)])),_:1})])])])),_:1},8,["value","color"])])}const U={setup(){const e=h(),t=v();return{party:e,encounter:t}},mounted(){},computed:{difficulty(){let e=this.encounter.creatures.reduce(((e,t)=>e+t.xp),0);return e/(40*this.party.size)},barColor(){const e=this.difficulty;return e>.75?"red":e>.5?"orange":e>.375?"yellow":"green"}},methods:{},data:()=>({}),props:[]};var F=l(8289),R=l(990);const T=(0,w.Z)(U,[["render",I]]),$=T;k()(U,"components",{QLinearProgress:F.Z,QBadge:R.Z});const E=(0,a._)("span",{style:{"padding-left":"10px"}},"Level range:",-1),P=(0,a._)("div",{style:{"text-align":"center"}},"Party Level",-1),V=(0,a._)("div",{style:{"text-align":"center"}},"Party Size",-1);function j(e,t,l,r,n,o){const s=(0,a.up)("q-btn"),i=(0,a.up)("q-input"),u=(0,a.up)("q-separator"),c=(0,a.up)("q-range"),d=(0,a.up)("q-space"),m=(0,a.up)("button-counter"),p=(0,a.up)("q-item-section"),h=(0,a.up)("q-item"),g=(0,a.up)("q-list"),f=(0,a.up)("q-menu"),v=(0,a.up)("q-toolbar");return(0,a.wg)(),(0,a.j4)(v,{class:(0,C.C_)(["d-flex justify-content-between",e.$q.dark.isActive?"bg-grey-9 text-white":"bg-grey-3"])},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{flat:"",round:"",dense:"",icon:"search"}),(0,a.Wm)(i,{style:{width:"30%","padding-right":"20px"},dense:"",modelValue:e.filter,"onUpdate:modelValue":[t[0]||(t[0]=t=>e.filter=t),t[1]||(t[1]=t=>e.$emit("updateFilter",{filter:t}))],label:"filter"},null,8,["modelValue"]),(0,a.Wm)(u,{vertical:"",inset:""}),E,(0,a.Wm)(c,{modelValue:e.levelRange,"onUpdate:modelValue":t[2]||(t[2]=t=>e.levelRange=t),style:{width:"30%","margin-left":"25px"},min:-1,max:25,markers:3,label:"","marker-labels":"",onChange:t[3]||(t[3]=t=>e.$emit("updateFilter",{levelRange:e.levelRange}))},null,8,["modelValue"]),(0,a.Wm)(d),(0,a.Wm)(s,{icon:"group",style:{"margin-right":"8px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{style:{"min-width":"100px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[P,(0,a.Wm)(m,{min:1,value:r.party.level,label:"Party Level",type:"number",onChange:t[4]||(t[4]=e=>o.setLevel(e))},null,8,["value"])])),_:1})])),_:1}),(0,a.Wm)(h,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[V,(0,a.Wm)(m,{min:1,value:r.party.size,label:"Party Size",type:"number",onChange:t[5]||(t[5]=e=>o.setSize(e))},null,8,["value"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(s,{icon:"layers"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(g,{bordered:"",separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.sources,(t=>((0,a.wg)(),(0,a.j4)(h,{clickable:"",active:e.active,key:t},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,C.zw)(t),1)])),_:2},1024)])),_:2},1032,["active"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["class"])}const A={style:{width:"8em","max-width":"100%"}};function X(e,t,l,r,n,o){const s=(0,a.up)("q-btn"),i=(0,a.up)("q-input"),u=(0,a.up)("q-btn-group");return(0,a.wg)(),(0,a.iD)("div",A,[(0,a.Wm)(u,{shrink:"",class:(0,C.C_)(["button-counter","text-white","rounded-borders",l.color])},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{ripple:!1,round:"",dense:"",flat:"",icon:"remove",class:"q-mr-xs",onClick:o.minusBtnClick},null,8,["onClick"]),(0,a.Wm)(i,{readonly:"",dense:"",dark:"",borderless:"",modelValue:n.counter,"onUpdate:modelValue":t[0]||(t[0]=e=>n.counter=e),"input-class":"text-center"},null,8,["modelValue"]),(0,a.Wm)(s,{ripple:!1,round:"",dense:"",flat:"",icon:"add",class:"q-mr-xs",onClick:o.plusBtnClick},null,8,["onClick"])])),_:1},8,["class"])])}const M={mounted(){console.log(this.min,this.max),this.counter=this.value||0},methods:{plusBtnClick(){void 0!==this.max&&this.counter==this.max||(this.counter++,this.$emit("change",this.counter,this.$el))},minusBtnClick(){void 0!=this.min&&this.counter==this.min||(this.counter--,this.$emit("change",this.counter,this.$el))}},data(){return{counter:this.value}},props:["value","color","min","max"]};var H=l(7236),K=l(6611);const O=(0,w.Z)(M,[["render",X]]),Y=O;k()(M,"components",{QBtnGroup:H.Z,QBtn:_.Z,QInput:K.Z});const G={setup(){const e=h();return{party:e}},mounted(){this.$emit("updateFilter",{levelRange:this.levelRange})},methods:{setLevel(e){localStorage.setItem("partyLevel",e),this.party.setLevel(e)},setSize(e){localStorage.setItem("partySize",e),this.party.setSize(e)}},data:()=>({filter:"",levelRange:{min:-1,max:25}}),components:{ButtonCounter:Y},props:["partySize","partyLevel","sources"]};var N=l(1663),J=l(926),ee=l(9380),te=l(136),le=l(5290),ae=l(3246),re=l(490),ne=l(1233);const oe=(0,w.Z)(G,[["render",j]]),se=oe;k()(G,"components",{QToolbar:N.Z,QBtn:_.Z,QInput:K.Z,QSeparator:J.Z,QRange:ee.Z,QSpace:te.Z,QMenu:le.Z,QList:ae.Z,QItem:re.Z,QItemSection:ne.Z});const ie={key:0},ue={class:"encounter-container"};function ce(e,t,l,r,n,o){const s=(0,a.up)("q-banner"),i=(0,a.up)("EncounterListItem");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(s,{"inline-actions":"",class:"bg-dark text-white"},{action:(0,a.w5)((()=>[])),default:(0,a.w5)((()=>[(0,a.Uk)(" Encounter Cost: "+(0,C.zw)(o.encounterCost)+" ",1),4!=r.party.size?((0,a.wg)(),(0,a.iD)("div",ie,[(0,a._)("small",null,"Awarded XP: "+(0,C.zw)(Math.floor(4*o.encounterCost/r.party.size)),1)])):(0,a.kq)("",!0)])),_:1}),(0,a._)("div",ue,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.encounter.creatures,(l=>((0,a.wg)(),(0,a.j4)(i,{key:l.id,creature:l,onRemoveCreature:t[0]||(t[0]=t=>e.$emit("removeEncounterListItem",t)),onChangeStrength:t[1]||(t[1]=(t,l)=>e.$emit("changeStrength",t,l)),onChangeQty:t[2]||(t[2]=(t,l)=>e.$emit("changeQty",t,l))},null,8,["creature"])))),128))])])}function de(e,t,l,r,n,o){const s=(0,a.up)("ButtonCounter"),i=(0,a.up)("q-item-section"),u=(0,a.up)("q-badge"),c=(0,a.up)("q-btn-toggle"),d=(0,a.up)("q-item");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Wm)(i,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{value:1,onChange:o.qtyChanged},null,8,["onChange"])])),_:1}),(0,a.Wm)(i,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Uk)((0,C.zw)(l.creature.data.name)+" ",1),(0,a.Wm)(u,{style:{float:"right"},outline:"",color:"primary",label:`${l.creature.xp}xp`},null,8,["label"])])])),_:1}),(0,a.Wm)(i,{side:""},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{modelValue:o.strength,"onUpdate:modelValue":t[0]||(t[0]=e=>o.strength=e),flat:"","toggle-color":"primary",ripple:!1,options:[{label:"WEAK",value:"weak"},{label:"BASE",value:"base"},{label:"ELITE",value:"elite"}]},null,8,["modelValue"])])),_:1})])),_:1})])}const me={setup(){const e=v();return{encounter:e}},mounted(){this.qty=this.creature.qty},methods:{qtyChanged(e){e<=0?this.encounter.removeCreature(this.creature):this.encounter.changeQty(e,this.creature)}},props:["creature"],computed:{strength:{get(){return["weak","base","elite"][this.creature.strength+1]},set(e){this.encounter.changeStrength(e,this.creature)}}},watch:{"creature.qty"(e){this.qty=e}},data:()=>({qty:null}),components:{ButtonCounter:Y}};var pe=l(1389);const he=(0,w.Z)(me,[["render",de]]),ge=he;k()(me,"components",{QItem:re.Z,QItemSection:ne.Z,QBadge:R.Z,QBtnToggle:pe.Z});const fe={setup(){const e=h(),t=v();return{party:e,encounter:t}},mounted(){},methods:{},computed:{encounterCost(){return this.encounter.creatures.reduce(((e,t)=>e+t.xp),0)}},data:()=>({components:{EncounterListItem:ge}}),props:[],components:{EncounterListItem:ge}};var ve=l(7128);const ye=(0,w.Z)(fe,[["render",ce]]),we=ye;k()(fe,"components",{QBanner:ve.Z});var be=l(9114);const _e={setup(){const e=h(),t=localStorage.getItem("dark_theme")||!1;return be.Z.set("true"==t),{party:e}},mounted(){this.party.setSize(parseInt(localStorage.getItem("partySize")||4)),this.party.setLevel(parseInt(localStorage.getItem("partyLevel")||1))},components:{CreatureTable:x,DifficultyBar:$,FilterBar:se,EncounterPanel:we},computed:{},methods:{toggleDarkTheme(e){be.Z.toggle(),localStorage.setItem("dark_theme",be.Z.isActive)},updateFilter(e){Object.assign(this.creatureFilter,e)}},data:()=>({darkMode:"dark_mode",encounter:[],partyLevel:null,partySize:null,creatureFilter:{filter:"",levelRange:{min:-1,max:25}}})};var qe=l(7605),ke=l(6602),We=l(1973),xe=l(1357),Ce=l(2133);const Ze=(0,w.Z)(_e,[["render",c]]),ze=Ze;k()(_e,"components",{QLayout:qe.Z,QHeader:ke.Z,QToolbar:N.Z,QToolbarTitle:We.Z,QAvatar:xe.Z,QSpace:te.Z,QBtn:_.Z,QPageContainer:Ce.Z})}}]);